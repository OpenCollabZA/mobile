#! /bin/sh

#convert apn_developer_identity.cer (der format) to pem
openssl x509 -in aps_production.cer -inform DER -out aps_developer_identity_production.pem -outform PEM

#convert p12 private key to pem (requires the input of a minimum 4 char password)
openssl pkcs12 -nocerts -out private_dev_key_production.pem -in SynthesisMobile-production.p12

# if you want remove password from the private key
openssl rsa -out private_key_noenc_production.pem -in private_dev_key_production.pem

#take the certificate and the key (with or without password) and create a PKCS#12 format file.
openssl pkcs12 -export -in aps_developer_identity_production.pem -inkey private_key_noenc_production.pem -certfile CertificateSigningRequest-production.certSigningRequest -name "apn_developer_identity" -out SynthesisMobile-production-server.p12